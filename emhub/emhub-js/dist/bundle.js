!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n){var t;!function(e){var n=function(){function e(e,n){this.commandContainer=$(e),this.callbackList=n}return e.prototype.init=function(){$("#emola-console").append(this.commandContainer),this.commandContainer.console({promptLabel:"Emola> ",commandValidate:function(e){return""!==e},commandHandle:this.callbackList,autofocus:!0,animateScroll:!0,promptHistory:!0,charInsertTrigger:function(e,n){return!0}})},e}();e.Console=n,function(){function t(){}return t.drawLoop=function(e){setTimeout(t.drawLoop,15,e),e.clearCanvasContext(),e.draw()},t.getPosition=function(n){var t=n.pageX,r=n.pageY,o=n.target.getBoundingClientRect(),a=t-o.left,i=r-o.top;return 500!==o.height||870!==o.width?new e.Point(200,200):new e.Point(a,i)},t.getDrawingObject=function(n,r,o,a){var i=t.getPosition(r),c=o.getPalette().click(i);if(c){var u=t.createParsedObject(c.toString(),a);u.point=e.Point.copy(i),u.draw&&o.add(u)}return o.getListObject(i,n)},t.createParsedObject=function(n,t){return t.add(n),e.Parser.parse(t)},t.read=function(e,n,t,r){var o;try{e.draw&&r.add(e),o=e.evalSyntax(t,r)}catch(e){o=e.name+': "'+e.message+'"'}return[{msg:"=> "+o,className:"jquery-console-message-value"}]},t.start=function(){var r,o=null,a=!1,i=new e.Socket,c=new e.Env(null),u=new e.TokenReader;$(document).ready((function(){var o=document.getElementById("canvas"),a=e.CanvasContext.create(o);null!==a&&(r=new e.DrawingDirector(a),t.drawLoop(r)),new n('<div class="console">',(function(e){var n=t.createParsedObject(e,u);return t.read(n,u,c,r)})).init(),i.onMessage((function(e){var n=JSON.parse(e.data);if(!r.hasId(n.id)){var o=t.createParsedObject(n.exp,u);return t.read(o,u,c,r)}}))})),$(window).mousedown((function(e){a=!0;var n=t.getDrawingObject(null,e,r,u);n&&(o=n)})),$(window).mouseup((function(e){if(a=!1,o){var n=t.getDrawingObject(o,e,r,u);n&&o!=n&&n.add(o),o=null}})),$(window).mousemove((function(e){a&&o&&(o.point=t.getPosition(e))})),$(window).dblclick((function(n){var a=t.getDrawingObject(o,n,r,u);if(a){var l=e.Point.copy(a.point);l.y+=20,r.addDisplayElement(new e.Text(e.TreeSerializer.serialize(a),l,new e.Color));var d={id:a.id,exp:e.TreeSerializer.serialize(a)};i.send(JSON.stringify(d));var s=a.evalSyntax(c,r),f=new e.Text(s,a.point,new e.Color);r.addDisplayElement(f)}}))},t}().start()}(t||(t={}))}]);