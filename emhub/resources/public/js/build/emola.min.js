/*! Emola 2014-09-11 */
var EMOLA={REVISION:"0.0.1"};EMOLA.DictEnv=function(a){this.outer=a,this.dict={}},EMOLA.DictEnv.prototype.update=function(a,b){this.dict[a]=b},EMOLA.DictEnv.prototype.get=function(a){return this.dict[a]},EMOLA.DictEnv.prototype.find=function(a){if(null===this.outer&&!this.dict[a])throw"symbol:"+a+" is not defined.";return this.dict[a]?this:this.outer.find(a)},EMOLA.Exception={},EMOLA.Exception.InvalidArgumentException=function(){Error.apply(this,arguments)},EMOLA.Exception.InvalidArgumentException.prototype=new Error,EMOLA.Exception.InvalidTypeException=function(){Error.apply(this,arguments)},EMOLA.Exception.InvalidTypeException.prototype=new Error,EMOLA.Fn=function(a,b,c){this.args=a,this.expList=b,this.env=c},EMOLA.Fn.prototype.eval=function(){return this.assert(),this.expList.eval(this.env)},EMOLA.Fn.prototype.assert=function(){},EMOLA.Quote=function(a){this.list=a},EMOLA.Quote.prototype.eval=function(a){return this.list.eval(a)},EMOLA.Quote.prototype.assert=function(){},EMOLA.Node=function(a){this.parent=a,this.children=[],this.token=null},EMOLA.Node.prototype.addChildren=function(a){this.children.push(a)},EMOLA.Atom=function(a,b){this.type=a,this.value=b||null},EMOLA.Atom.FN="fn",EMOLA.Atom.IF="if",EMOLA.Atom.DEF="def",EMOLA.Atom.DEFN="defn",EMOLA.Atom.DO="do",EMOLA.Atom.SEND="send",EMOLA.Atom.VAR="var",EMOLA.Atom.LET="let",EMOLA.Atom.QUOTE="quote",EMOLA.Atom.EVAL="eval",EMOLA.Atom.TRUE="true",EMOLA.Atom.FALSE="false",EMOLA.Atom.STR="str",EMOLA.Atom.NUMBER="number",EMOLA.Atom.PLUS="+",EMOLA.Atom.MINUS="-",EMOLA.Atom.DIV="/",EMOLA.Atom.MUL="*",EMOLA.Atom.EQUAL="=",EMOLA.Atom.GREATER=">",EMOLA.Atom.LESS="<",EMOLA.Atom.GREATEREQUAL=">=",EMOLA.Atom.LESSEQUAL="<=",EMOLA.Atom.DRAW="draw",EMOLA.Atom.POINT="point",EMOLA.Atom.COLOR="color",EMOLA.Atom.CIRCLE="circle",EMOLA.Atom.CLEAR="clear",EMOLA.Atom.isAtom=function(a){return a instanceof EMOLA.Atom},EMOLA.Atom.getAtoms=function(){return[EMOLA.Atom.FN,EMOLA.Atom.IF,EMOLA.Atom.DEF,EMOLA.Atom.DEFN,EMOLA.Atom.DO,EMOLA.Atom.SEND,EMOLA.Atom.LET,EMOLA.Atom.QUOTE,EMOLA.Atom.EVAL,EMOLA.Atom.PLUS,EMOLA.Atom.MINUS,EMOLA.Atom.DIV,EMOLA.Atom.MUL,EMOLA.Atom.EQUAL,EMOLA.Atom.GREATER,EMOLA.Atom.LESS,EMOLA.Atom.GREATEREQUAL,EMOLA.Atom.LESSEQUAL,EMOLA.Atom.DRAW,EMOLA.Atom.POINT,EMOLA.Atom.COLOR,EMOLA.Atom.CIRCLE,EMOLA.Atom.CLEAR]},EMOLA.Atom.isAtomToken=function(a){return EMOLA.Atom.getAtoms().indexOf(a)>=0},EMOLA.Atom.prototype.equalToType=function(a){return this.type===a},EMOLA.Atom.prototype.eval=function(a){switch(this.type){case EMOLA.Atom.TRUE:return!0;case EMOLA.Atom.FALSE:return!1;case EMOLA.Atom.STR:return this.value;case EMOLA.Atom.NUMBER:return Number(this.value);case EMOLA.Atom.VAR:if(a.find(this.value))return foundValue=a.find(this.value).get(this.value),foundValue.eval?foundValue.eval(a):foundValue;throw"target key of environment is not found.";default:throw console.log(this.type),new EMOLA.Exception.InvalidTypeException}},EMOLA.Color=function(a,b,c,d){this.r=a||0,this.g=b||0,this.b=c||0,this.a=d||1},EMOLA.Color.prototype.move=function(a){this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a},EMOLA.Point=function(a,b){this.x=a,this.y=b},EMOLA.Point.prototype.move=function(a){this.x=a.x,this.y=a.y},EMOLA.Point.prototype.add=function(a){this.x+=a.x,this.y+=a.y},EMOLA.Rect=function(a,b,c){this.point=a,this.size=b,this.color=c},EMOLA.Rect.prototype.move=function(a,b,c){this.point.x=a.x,this.point.y=a.y,this.size.width=b.width,this.size.height=b.height,this.color.r=c.r,this.color.g=c.g,this.color.b=c.b},EMOLA.Rect.prototype.draw=function(a){a.drawRect(this)},EMOLA.Size=function(a,b){this.width=a,this.height=b},EMOLA.Size.prototype.move=function(a,b){this.width=a,this.height=b},EMOLA.Figure=function(a,b,c){this.point=a,this.width=b,this.height=c},EMOLA.Figure.prototype.move=function(a,b,c){this.point.move(a),this.width=b,this.height=c},EMOLA.Circle=function(a,b,c){this.constructor(a,2*b,2*b),this.radius=b,this.color=c},EMOLA.Circle.prototype=new EMOLA.Figure,EMOLA.Circle.prototype.move=function(a,b,c){this.point.x=a.x,this.point.y=a.y,this.radius=b,this.color.r=c.r,this.color.g=c.g,this.color.b=c.b,this.color.a=c.a},EMOLA.Circle.prototype.draw=function(a){a.drawCircle(this)},EMOLA.List=function(a,b,c){this.list=a,this.radius=50,this.theta=0,this.nodeColor=new EMOLA.Color(255,255,51),this.leafColor=new EMOLA.Color(102,102,102),this.listColor=new EMOLA.Color(50,50,50,.2),this.parent=b||null,this.point=c||null},EMOLA.List.NODE_RADIUS=20,EMOLA.List.LEAF_RADIUS=15,EMOLA.List.prototype.push=function(a){return this.list.push(a)},EMOLA.List.prototype.rotate=function(a){this.theta+=a;for(var b=0;b<this.list.length;b++)this.list[b]instanceof EMOLA.List&&this.list[b].rotate(a)},EMOLA.List.prototype.pop=function(){return this.list.pop()},EMOLA.List.prototype.draw=function(a){for(var b=new EMOLA.Circle(this.point,EMOLA.List.NODE_RADIUS,this.nodeColor),c=0;c<this.list.length;c++){this.theta+=2*Math.PI/this.list.length;var d=new EMOLA.Point(this.point.x+this.radius*Math.cos(this.theta),this.point.y+this.radius*Math.sin(this.theta));if(this.list[c]instanceof EMOLA.List){var d=new EMOLA.Point(this.point.x+3*this.radius*Math.cos(this.theta),this.point.y+3*this.radius*Math.sin(this.theta));this.list[c].point=d,this.list[c].draw(a)}else{var e=new EMOLA.Circle(d,EMOLA.List.LEAF_RADIUS,this.leafColor);e.draw(a)}}new EMOLA.Circle(this.point,this.radius,this.listColor).draw(a),b.draw(a)},EMOLA.List.Circle=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Circle.prototype=new EMOLA.List,EMOLA.List.Circle.prototype.eval=function(a){this.assert();var b=this.list[1],c=this.list[2],d=this.list[3];return new EMOLA.Circle(b.eval(a),c.eval(a),d.eval(a))},EMOLA.List.Circle.prototype.assert=function(){},EMOLA.List.Clear=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Clear.prototype=new EMOLA.List,EMOLA.List.Clear.prototype.eval=function(){return this.assert(),EMOLA.Global.graphicContext.clear(),EMOLA.Global.drawingManager.clear(),null},EMOLA.List.Clear.prototype.assert=function(){},EMOLA.List.Color=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Color.prototype=new EMOLA.List,EMOLA.List.Color.prototype.eval=function(a){return this.assert(),new EMOLA.Color(this.list[1].eval(a),this.list[2].eval(a),this.list[3].eval(a))},EMOLA.List.Color.prototype.assert=function(){if(void 0===this.list[1]||void 0===this.list[2]||void 0===this.list[3]||this.list.length>4)throw"color arguments are illegal."},EMOLA.List.Def=function(){EMOLA.List.apply(this,arguments),this.listColor=new EMOLA.Color(0,255,0,.2)},EMOLA.List.Def.prototype=new EMOLA.List,EMOLA.List.Def.prototype.eval=function(a){this.assert();var b=this.list[1].value,c=this.list[2].eval(a);return a.update(b,c),null},EMOLA.List.Def.prototype.assert=function(){if(3!==this.list.length)throw new Error("InvalidArgumentException");if(this.list[1].type!==EMOLA.Atom.VAR)throw new Error("InvalidAtomTypeException")},EMOLA.List.Defn=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Defn.prototype=new EMOLA.List,EMOLA.List.Defn.prototype.eval=function(a){this.assert();var b=this.list[1],c=this.list[2].list,d=this.list[3];return a.update(b.value,new EMOLA.Fn(c,d,new EMOLA.DictEnv(a))),null},EMOLA.List.Defn.prototype.assert=function(){if(4!==this.list.length)throw new Error("InvalidArgumentException")},EMOLA.List.Div=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Div.prototype=new EMOLA.List,EMOLA.List.Div.prototype.eval=function(a){this.assert();for(var b=1,c=1;c<this.list.length;c++)1===c?b=this.list[c].eval(a):b/=this.list[c].eval(a);return b},EMOLA.List.Div.prototype.assert=function(){},EMOLA.List.Do=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Do.prototype=new EMOLA.List,EMOLA.List.Do.prototype.eval=function(a){this.assert();var b=this.list.slice(1),c=b.map(function(b){return b.eval(a)});return c[c.length-1]},EMOLA.List.Do.prototype.assert=function(){},EMOLA.List.Draw=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Draw.prototype=new EMOLA.List,EMOLA.List.Draw.prototype.eval=function(a){this.assert(),console.log("hogehoge");var b=this.list[1].eval(a);return EMOLA.Global.drawingManager.add(b),b},EMOLA.List.Draw.prototype.assert=function(){},EMOLA.List.Equal=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Equal.prototype=new EMOLA.List,EMOLA.List.Equal.prototype.eval=function(a){return this.assert(),this.list[1].eval(a)===this.list[2].eval(a)},EMOLA.List.Equal.prototype.assert=function(){},EMOLA.List.Eval=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Eval.prototype=new EMOLA.List,EMOLA.List.Eval.prototype.eval=function(a){if(this.assert(),this.list[1].type===EMOLA.Atom.VAR){var b=this.list[1].value,c=a.find(b).get(b);return c.eval(a)}return this.list[1].eval(a).eval(a)},EMOLA.List.Eval.prototype.assert=function(){},EMOLA.List.Fn=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Fn.prototype=new EMOLA.List,EMOLA.List.Fn.prototype.eval=function(a){var b=this.list[1].list,c=this.list[2];return new EMOLA.Fn(b,c,a)},EMOLA.List.Fn.prototype.assert=function(){},EMOLA.List.Greater=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Greater.prototype=new EMOLA.List,EMOLA.List.Greater.prototype.eval=function(a){return this.assert(),this.list[1].eval(a)>this.list[2].eval(a)},EMOLA.List.Greater.prototype.assert=function(){},EMOLA.List.Greaterequal=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Greaterequal.prototype=new EMOLA.List,EMOLA.List.Greaterequal.prototype.eval=function(a){return this.assert(),this.list[1].eval(a)>=this.list[2].eval(a)},EMOLA.List.Greaterequal.prototype.assert=function(){},EMOLA.List.If=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.If.prototype=new EMOLA.List,EMOLA.List.If.prototype.eval=function(a){this.assert();var b=this.list[1],c=this.list[2],d=this.list[3];return b.eval(a)?c.eval(a):d.eval(a)},EMOLA.List.If.prototype.assert=function(){if(4!==this.list.length)throw new Error("InvalidArgumentException")},EMOLA.List.Less=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Less.prototype=new EMOLA.List,EMOLA.List.Less.prototype.eval=function(a){return this.assert(),this.list[1].eval(a)<this.list[2].eval(a)},EMOLA.List.Less.prototype.assert=function(){},EMOLA.List.Lessequal=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Lessequal.prototype=new EMOLA.List,EMOLA.List.Lessequal.prototype.eval=function(a){return this.assert(),this.list[1].eval(a)<=this.list[2].eval(a)},EMOLA.List.Lessequal.prototype.assert=function(){},EMOLA.List.Let=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Let.prototype=new EMOLA.List,EMOLA.List.Let.prototype.eval=function(a){this.assert();for(var b=this.list[1].list,c=this.list[2],d=new EMOLA.DictEnv(a),e=0;e<b.length;e+=2)d.update(b[e].value,b[e+1].eval(d));return c.eval(d)},EMOLA.List.Let.prototype.assert=function(){},EMOLA.List.Minus=function(){EMOLA.List.apply(this,arguments),this.listColor=new EMOLA.Color(50,0,0,.2)},EMOLA.List.Minus.prototype=new EMOLA.List,EMOLA.List.Minus.prototype.eval=function(a){this.assert();for(var b=0,c=1;c<this.list.length;c++)1===c?b=this.list[c].eval(a):b-=this.list[c].eval(a);return b},EMOLA.List.Minus.prototype.assert=function(){},EMOLA.List.Mul=function(){EMOLA.List.apply(this,arguments),this.listColor=new EMOLA.Color(0,200,50,.2)},EMOLA.List.Mul.prototype=new EMOLA.List,EMOLA.List.Mul.prototype.eval=function(a){this.assert();for(var b=1,c=1;c<this.list.length;c++)b*=this.list[c].eval(a);return b},EMOLA.List.Mul.prototype.assert=function(){},EMOLA.List.NestList=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.NestList.prototype=new EMOLA.List,EMOLA.List.NestList.prototype.eval=function(a){this.assert();var b=this.list[0].eval(a),c=this.list[0].slice(1);return b.exec(c,a)},EMOLA.List.NestList.prototype.assert=function(){},EMOLA.List.Plus=function(){EMOLA.List.apply(this,arguments),this.listColor=new EMOLA.Color(255,0,0,.2)},EMOLA.List.Plus.prototype=new EMOLA.List,EMOLA.List.Plus.prototype.eval=function(a){this.assert();for(var b=0,c=1;c<this.list.length;c++)b+=this.list[c].eval(a);return b},EMOLA.List.Plus.prototype.assert=function(){},EMOLA.List.Point=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Point.prototype=new EMOLA.List,EMOLA.List.Point.prototype.eval=function(a){return this.assert(),new EMOLA.Point(this.list[1].eval(a),this.list[2].eval(a))},EMOLA.List.Point.prototype.assert=function(){if(void 0===this.list[1]||void 0===this.list[2]||this.list.length>3)throw"point arguments are illegal."},EMOLA.List.Quote=function(){EMOLA.List.apply(this,arguments),this.listColor=new EMOLA.Color(0,100,0,.2)},EMOLA.List.Quote.prototype=new EMOLA.List,EMOLA.List.Quote.prototype.eval=function(){this.assert();var a=this.list[1];return new EMOLA.Quote(a)},EMOLA.List.Quote.prototype.assert=function(){if(this.list[0].type!==EMOLA.Atom.QUOTE)throw new Error("InvalidAtomTypeException")},EMOLA.List.Send=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Send.prototype=new EMOLA.List,EMOLA.List.Send.prototype.eval=function(a){this.assert();var b=this.list[1].eval(a),c=this.list[2].value,d=this.list.slice(3).map(function(b){return b.eval(a)});return b[c].apply(b,d),b},EMOLA.List.Send.prototype.assert=function(){},EMOLA.List.Var=function(){EMOLA.List.apply(this,arguments)},EMOLA.List.Var.prototype=new EMOLA.List,EMOLA.List.Var.prototype.eval=function(a){if(this.assert(),this.list[0]instanceof EMOLA.List.Var)var b=this.list[0].eval(a);else var b=a.find(this.list[0].value).get(this.list[0].value);for(var c=this.list.slice(1),d=0;d<c.length;d++)b.env.dict[b.args[d].value]=c[d].eval(a);return b.eval(a)},EMOLA.List.Var.prototype.assert=function(){},EMOLA.Line=function(a,b){this.from=a,this.to=b},EMOLA.Line.prototype.draw=function(a){a.drawLine(this)},EMOLA.TokenReader=function(a){this.tokenizedList=[],a&&this.add(a)},EMOLA.TokenReader.prototype.add=function(a){this.tokenizedList=this.tokenizedList.concat(EMOLA.tokenize(a))},EMOLA.TokenReader.prototype.next=function(){return 0===this.tokenizedList.length?null:this.tokenizedList.shift()},EMOLA.ContextWrapper=function(a){this.context=a,this.width=a.canvas.width,this.height=a.canvas.height},EMOLA.ContextWrapper.prototype.drawCircle=function(a){this.context.beginPath(),this.context.fillStyle="rgba("+a.color.r+" ,"+a.color.g+" ,"+a.color.b+" ,"+a.color.a+")",this.context.arc(a.point.x,a.point.y,a.radius,0,2*Math.PI,!1),this.context.fill()},EMOLA.ContextWrapper.prototype.drawRect=function(a){this.context.fillStyle="rgb("+a.color.r+" ,"+a.color.g+" ,"+a.color.b+")",this.context.fillRect(a.point.x,a.point.y,a.size.width,a.size.height)},EMOLA.ContextWrapper.prototype.clear=function(){var a=this.context.canvas.clientWidth,b=this.context.canvas.clientHeight;this.context.clearRect(0,0,a,b)},EMOLA.ContextWrapper.prototype.drawLine=function(a){this.context.beginPath(),this.context.moveTo(a.from.x,a.from.y),this.context.lineTo(a.to.x,a.to.y),this.context.stroke()},EMOLA.ContextWrapper.prototype.drawString=function(a){this.context.beginPath(),this.context.moveTo(a.from.x,a.from.y),this.context.lineTo(a.to.x,a.to.y),this.context.stroke()},EMOLA.DrawingManager=function(){this.list=[]},EMOLA.DrawingManager.prototype.add=function(a){this.list.push(a)},EMOLA.DrawingManager.prototype.clear=function(){this.list=[]},EMOLA.DrawingManager.prototype.draw=function(a){for(var b=0;b<this.list.length;b++)this.list[b].rotate&&this.list[b].rotate(.01),this.list[b].draw(a)},EMOLA.Global={},EMOLA.Global.env=new EMOLA.DictEnv(null),EMOLA.Global.tokenReader=new EMOLA.TokenReader,EMOLA.Global.graphicContext=null,EMOLA.Global.drawingManager=new EMOLA.DrawingManager,EMOLA.Global.lastClickedPoint=null,EMOLA.tokenize=function(a){return a.split("(").join(" ( ").split(")").join(" ) ").split(" ").filter(function(a){return a?!0:!1}).map(function(a){return parsedFloat=parseFloat(a),isNaN(parsedFloat)?a:parsedFloat})},EMOLA.atomize=function(a){if(a===EMOLA.Atom.TRUE)return new EMOLA.Atom(EMOLA.Atom.TRUE);if(a===EMOLA.Atom.FALSE)return new EMOLA.Atom(EMOLA.Atom.FALSE);if("string"==typeof a)return'"'===a[0]||"'"===a[0]?new EMOLA.Atom(EMOLA.Atom.STR,a.slice(1,-1)):EMOLA.Atom.isAtomToken(a)?new EMOLA.Atom(a,null):new EMOLA.Atom(EMOLA.Atom.VAR,a);if("number"==typeof a)return new EMOLA.Atom(EMOLA.Atom.NUMBER,a);throw"Unknown token"},EMOLA.parse=function(a,b){for(var c=[];;){if(token=a.next(),b)point=null;else{var d=200*Math.random(),e=200*Math.random();point=new EMOLA.Point(parseInt(d),parseInt(e))}if("("===token)c.push(EMOLA.parse(a,b));else{if(")"===token)return EMOLA.createList(c,b,point);if(null===token)break;c.push(EMOLA.atomize(token))}}return c[0]},EMOLA.createList=function(a,b,c){var d=a[0],e={};e[EMOLA.Atom.FN]=EMOLA.List.Fn,e[EMOLA.Atom.IF]=EMOLA.List.If,e[EMOLA.Atom.DEF]=EMOLA.List.Def,e[EMOLA.Atom.DEFN]=EMOLA.List.Defn,e[EMOLA.Atom.DO]=EMOLA.List.Do,e[EMOLA.Atom.SEND]=EMOLA.List.Send,e[EMOLA.Atom.LET]=EMOLA.List.Let,e[EMOLA.Atom.QUOTE]=EMOLA.List.Quote,e[EMOLA.Atom.EVAL]=EMOLA.List.Eval,e[EMOLA.Atom.PLUS]=EMOLA.List.Plus,e[EMOLA.Atom.MINUS]=EMOLA.List.Minus,e[EMOLA.Atom.DIV]=EMOLA.List.Div,e[EMOLA.Atom.MUL]=EMOLA.List.Mul,e[EMOLA.Atom.EQUAL]=EMOLA.List.Equal,e[EMOLA.Atom.GREATER]=EMOLA.List.Greater,e[EMOLA.Atom.LESS]=EMOLA.List.Less,e[EMOLA.Atom.GREATEREQUAL]=EMOLA.List.Greaterequal,e[EMOLA.Atom.LESSEQUAL]=EMOLA.List.Lessequal,e[EMOLA.Atom.DRAW]=EMOLA.List.Draw,e[EMOLA.Atom.POINT]=EMOLA.List.Point,e[EMOLA.Atom.COLOR]=EMOLA.List.Color,e[EMOLA.Atom.CIRCLE]=EMOLA.List.Circle,e[EMOLA.Atom.CLEAR]=EMOLA.List.Clear;var f=e[d.type];return f||(f=EMOLA.List.Var),new f(a,b,c)},EMOLA.parseAndEval=function(a,b){b||(b=new EMOLA.DictEnv(null));var c=EMOLA.parse(a);return c.eval(b)},EMOLA.readAndEval=function(a,b){return EMOLA.Global.tokenReader.add(a),EMOLA.parseAndEval(EMOLA.Global.tokenReader,b)},EMOLA.External={},EMOLA.External.createTestList=function(){var a=new EMOLA.List([new EMOLA.Atom(EMOLA.Atom.PLUS,null),new EMOLA.Atom(EMOLA.Atom.INT,2),new EMOLA.Atom(EMOLA.Atom.INT,3)]),b=new EMOLA.List([new EMOLA.Atom(EMOLA.Atom.MINUS,null),new EMOLA.Atom(EMOLA.Atom.INT,2),new EMOLA.Point(400,200),a],null,new EMOLA.Point(400,200));return a.parent=b,b},EMOLA.Front={},$(document).ready(function(){var a=$('<div class="console">');$("body").append(a),a.console({promptLabel:"Emola> ",commandValidate:function(a){return""!==a},commandHandle:function(a){var b="";try{EMOLA.Global.tokenReader.add(a);var c=EMOLA.parse(EMOLA.Global.tokenReader);c.draw&&EMOLA.Global.drawingManager.add(c),b=c.eval(EMOLA.Global.env)}catch(d){b="Parse error",console.log(d)}return[{msg:"=> "+b,className:"jquery-console-message-value"}]},autofocus:!0,animateScroll:!0,promptHistory:!0,charInsertTrigger:function(){return!0}})}),EMOLA.Front.drawLoop=function(){EMOLA.Global.graphicContext.clear(),EMOLA.Global.drawingManager.draw(EMOLA.Global.graphicContext),setTimeout(EMOLA.Front.drawLoop,30)},window.onkeydown=function(){null===EMOLA.Global.graphicContext&&(EMOLA.Global.graphicContext=EMOLA.createContextWrapper("canvas"),EMOLA.Front.drawLoop())},window.onclick=function(a){null===EMOLA.Global.graphicContext&&(EMOLA.Global.graphicContext=EMOLA.createContextWrapper("canvas")),console.log(a)},EMOLA.createContextWrapper=function(a){var b=document.getElementById(a);return new EMOLA.ContextWrapper(b&&b.getContext?b.getContext("2d"):null)};